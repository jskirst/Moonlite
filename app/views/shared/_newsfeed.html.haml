:javascript
  $(function(){ 
    $(".youtube_answer").each(function(){ set_large_youtube_preview($(this).attr("alt"), $(this).attr("id")); });
    $(".display_sharing_icon").click(function(){ 
      $(this).parents(".leftstuff").find(".social_toolbar").css("display", "inline");
      $(this).parent().remove(); 
    }); 
  });
  
- if newsfeed_items.empty?
  %div.post{ style: "height: 300px;"}
    %p There are no responses yet.
- newsfeed_items.each do |r|
  %div.post
    %div.postphotospace
      = link_to (image_tag r.user.profile_pic, class: "photo"), r.user
    %div.postspace
      %div.postheader
        %h3
          = link_to truncate(r.user.to_s, length: 50), profile_path(r.user.username), class:"username"
        %div.votingandpointsarea
          - if current_user
            %span.vote_points{style:"font-weight: bold;color: #404040;font-size: 16px;position: relative; top:3px;"}= r.points_awarded
            %span{style:"font-weight: bold;color: #404040;font-size: 16px;position: relative; top:3px; margin-right:5px;"} pts
            = link_to vote_task_path(r.task.id, sa_id: r.submitted_answer.id), remote: true, class: ("btn vote_button " + (@votes.include?(r.submitted_answer.id) ? "btn-primary" : "")) do
              %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/purple+upvote+arrow.png" }            
          - else
            %a.btn.vote_button
              %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/purple+upvote+arrow.png" }
              %div.vote_count= r.submitted_answer.total_votes.to_i
      %div.posttext.leveltext= link_to r.task.question, task_details_path(r.path, r.submitted_answer.id), style: "color: inherit;"
      %div.CRarea
        - if r.task.answer_sub_type == Task::TEXT
          %pre{ style: "margin:20px; word-break:normal;" }= r.submitted_answer.content
        - elsif r.task.answer_sub_type == Task::IMAGE
          = image_tag(sanitize(r.submitted_answer.content))
        - elsif r.task.answer_sub_type == Task::YOUTUBE
          %center
            %div.youtube_answer{ id: "youtube_answer_#{r.id}", alt: r.submitted_answer.content }
      = render "comments/comments", { owner: r.submitted_answer, owner_type: "SubmittedAnswer", owner_id: r.submitted_answer_id, comment_count: r.submitted_answer.comments.size, created_at: r.created_at, sharing_url: submission_details_url(r.path, r.submitted_answer.id), sharing_title: "Great response to the #{r.path.name} Challenge on @MetaBright." }
- if @more_available
  %div.post{ style: "text-align: center; margin: auto;" }
    :javascript
      $(function(){ $(".view_more").on("ajax:success", function(xhr, data){ $(this).parent().replaceWith(data); }); });
    = link_to "View More", "#{request.url}?page=#{(@page+1)}", class: "button button-standard view_more", style: "text-align: center; margin: auto;", remote: true