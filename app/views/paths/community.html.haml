%section
  %div#topsection
    %div#updatespace
      %div{ style: "display:inline; width:20%;" }
        = image_tag @path.path_pic, class: "bigheaderimage"
      %div.rightofbigheaderimage{ style: "width:80%;" }
        %div#topboxcontent
          %div.button.button-actionable{ style: "float: right;"} Continue Level #{@enrollment.level}
          %div.span5{ style: "width: 550px;" }
            %h1= @path.name
            %h3 Level #{@enrollment.level}, #{@enrollment.total_points} points
        %div.challengecarousel
          %ul.inlinedisplay
            - @enrolled_users.each do |u|
              %li
                %div.mosaic-block.bar2
                  = link_to user_path(u), class: "mosaic-overlay", target: "_blank" do
                    %div.details
                      %h4= u.name
                  %div
                    %img.mosaic-backdrop{ src: u.profile_pic }
  %div.row
    %div.span5
      %div.leftbox.newsfeed{ style: "min-height: 361px;" }
        %div.leftboxheader{style: "padding: 10px 12px; "} Leaderboard
        %ul#ranks{ style: "padding: 0px;"}
          - @leaderboards.each_with_index do |entry, i|
            %li{ style: "border-bottom: 1px solid rgb(235, 235, 235);"}
              %span.rank= (i+1).to_s
              = image_tag entry.user.profile_pic 
              = link_to truncate(entry.user.name, length: 25), entry.user, class: "name"
              %span.level lvl. #{entry.user.level(@path)}
              %span.points= entry.score
    %div.span11
      %div.newsfeed
        %div.leftboxheader
          %div
            %span{ style: "border-bottom: 0px; padding-top:1px;" } Stream
            = link_to "Date", community_path_path(@path, order: "date"), class: "btn leftbtn"
            = link_to "Votes", community_path_path(@path, order: "votes"), class: "btn midbtn"
            - if @path
              %a.btn.rightbtn{ onclick: "$(this).parents('.leftboxheader').find('.questions_filter').slideDown();" } Question
          -if @path
            %div.questions_filter{ style: "display:none;" }
              %p{ style: "font-size: 13px; margin: 10px 5px; color: black;" } Click on one of the questions below to see responses only for that question.
              %ol
                - @path.sections.each do |s|
                  - s.creative_tasks.each do |task|
                    %li{ style: "padding: 5px;" }= link_to truncate(task.question, length: 80), community_path_path(@path, task: task.id), style: "font-size: 14px; text-decoration: none; color: #0064CD"
        = render "shared/newsfeed", { newsfeed_items: @responses }

%div#launchpad.modal.hide.fade{ style: "left: 36%; top: 30%;"}
  %div.overlay
    %div.launchpad
      %button.modal_close &times;
      %h1
        = image_tag(@path.path_pic)
        %span #{@path.name} - #{@total_points_earned} pts, Level #{current_user.level(@path)}
      %div.launchpadcontent
        %div.launchpadsectioncolumn
          %div.launchpadcolumnheader
            Sections
          %ul.sectionlist
            - @path.sections.each do |s|
              %li.launchpad_link
                = link_to truncate(s.name, length: 25), launchpad_section_path(s), remote: true, style: "text-decoration: none;"+(s.unlocked?(current_user) ? "font-weight: bold" : "") 
                %div.pointsandprogress
                  %div #{s.points_earned(current_user)} points
                  %div #{s.percentage_complete(current_user)}%
        = render "sections/launchpad"

:javascript
  $(function(){
    $(".button-actionable").click(function(){
      $('#launchpad').modal({ keyboard: true, backdrop: 'static', show: true });
    });
     
    $(".launchpad_link").on("ajax:success", function(xhr, data, etc){
      $(".sectioninfocontainer").replaceWith(data);
    });
  });

- if @display_launchpad
  :javascript
    $(function(){ $('#launchpad').modal({ keyboard: true, backdrop: 'static', show: true }); });