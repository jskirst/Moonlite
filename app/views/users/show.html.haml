:javascript
  jQuery(function($){
    $('.bar2').mosaic({
      animation : 'slide'   //fade or slide
    });
    $('.comment').click({
      animation : 'slide',  //fade or slide
      hover_x   : '400px'   //Horizontal position on hover
    });
  });
  
:javascript
  jQuery(function($){
    $('.accordion-toggle').click(function() {
      if($(this).hasClass("active_accordion") == false ) {
        $('.accordion-toggle').removeClass('active_accordion');
        $(this).addClass('active_accordion');}
      else {
        $('.accordion-toggle').removeClass('active_accordion');}
      });
    });

%div#homepage
  %div#topsection
    %div#updatespace
      = image_tag @user.profile_pic, class: "bigheaderimage"
      %div.rightofbigheaderimage
        %div#topboxcontent{ style: "height: 83px;" }
          %div{ style: "width: 118px; float:right;" }
            - if @user == current_user
              = link_to "Edit Profile", edit_user_path(@user), class: "button button-standard"
          %div.span7{style: "min-height: 65px; vertical-align: top; margin: 0; width: 600px;"}
            %h1= @user.name
            %p{ style: "font-size: 16px; margin: 5px 0 0px 0;"}= truncate(@enrolled_personas.collect(&:name).join(", "), length: 70)
        %div#challengecarousel_container
          - if @enrollments.size > 3
            %div#challengeleft_scroll
              %a{href: "javascript:challengeslide(\"left\");"}
                %img{src: "https://s3.amazonaws.com/moonlite-nsdub/static/random+icons/arrow_angle_left_light.png"}/
          %div#challengecarousel_inner
            %ul#challengecarousel_ul
              - if @enrollments.size < 4
                = render "shared/mosaic", { custom_class: "addthis_button_facebook", link: "#", title: "Sharing is caring", subtitle: "Spread the Metabright Gospel!", pic: "https://s3.amazonaws.com/moonlite-nsdub/static/carousel_images/fb_green_carousel.png" }
              - @enrollments.each do |e|
                = render "shared/mosaic", { custom_class: "clip_pic", pic: e.path.path_pic, link: challenge_path(e.path.permalink), title: e.path.name, subtitle: "Level #{e.level}, #{e.total_points} points" }
          - if @enrollments.size > 3
            %div#challengeright_scroll
              %a{href: "javascript:challengeslide(\"right\");"}
                %img{src: "https://s3.amazonaws.com/moonlite-nsdub/static/random+icons/arrow_angle_right_light.png"}/
      %input#challengehidden_auto_slide_seconds{:type => "hidden", :value => "0"}/

  %div.row
    %div.span5
      %div.leftbox{}
        %div.leftboxheader
          Completed Tasks
        %div.leftboxfooter
          %div#accordion2.accordion
            %div.accordion-group
              %div.accordion-heading
                %a.accordion-toggle{"data-parent" => "#accordion2", "data-toggle" => "collapse", href:"#collapseOne"}
                  %div.expand_contract
                  %span Challenge Name
              %div#collapseOne.accordion-body.collapse
                %div.accordion-inner
                  %div.singletaskentry
                    %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/random+icons/check_blue3.png" }
                    %div
                      %span{style: "display:block;"} Run a marathon.
                  %div.singletaskentry
                    %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/random+icons/check_green3.png" }
                    %div
                      %span{style: "display:block;"} Run a marathon naked in the rain with a pack of wolves chasing after you.
            // section below is basically duplicated for demo purposes. i'm totally gonna learn loops soon
            %div.accordion-group
              %div.accordion-heading
                %a.accordion-toggle{"data-parent" => "#accordion2", "data-toggle" => "collapse", href:"#collapseTwo"}
                  %div.expand_contract
                  %span Challenge Name
              %div#collapseTwo.accordion-body.collapse
                %div.accordion-inner
                  %div.singletaskentry
                    %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/random+icons/check_blue3.png" }
                    %div
                      %span{style: "display:block;"} Run a marathon.
                  %div.singletaskentry
                    %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/random+icons/check_green3.png" }
                    %div
                      %span{style: "display:block;"} Run a marathon naked in the rain with a pack of wolves chasing after you. 
      %div.leftbox{ style: "" }
        %div.leftboxheader Progress
        %div.leftboxfooter{style:"padding-top: 6px"}
          %div
            %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/Persona+Icons/Icon_Explorer_130.PNG", style:"width:50px; height:50px;"}              
            %div.personaprogress
              %span{ style: "font-size:18px;"} Persona Name 
              %span{style: "font-size:14px; float:right; "}Level 4
              %span{ style: "position:relative; bottom:3px;display:block; line-height:16px;"} 300 more points to level up!
              %div.progress.progress-info
                %div.bar{ style: "width:30%;"} 
                  -# = The width of this div should be dynamically changed based on the user's progress in current level. 
          %div
            %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/Persona+Icons/Icon_Explorer_130.PNG", style:"width:50px; height:50px;"}              
            %div.personaprogress
              %span{ style: "font-size:18px;"} Persona Name 
              %span{style: "font-size:14px; float:right; "}Level 4
              %span{ style: "position:relative; bottom:3px;display:block; line-height:16px;"} 300 more points to level up!
              %div.progress.progress-info
                %div.bar{ style: "width:30%;"} 
                  -# = The width of this div should be dynamically changed based on the user's progress in current level. 
          %div
            %img{ src: "https://s3.amazonaws.com/moonlite-nsdub/static/Persona+Icons/Icon_Explorer_130.PNG", style:"width:50px; height:50px;"}              
            %div.personaprogress
              %span{ style: "font-size:18px;"} Persona Name 
              %span{style: "font-size:14px; float:right; "}Level 4
              %span{ style: "position:relative; bottom:3px;display:block; line-height:16px;"} 300 more points to level up!
              %div.progress.progress-info
                %div.bar{ style: "width:30%;"} 
                  -# = The width of this div should be dynamically changed based on the user's progress in current level.
      %div.leftbox
        %div.leftboxheader About
        %div.leftboxfooter{style:"padding-top: 6px"}
          %span= @user.description || "Person of mystery is a mystery..."
      %div.leftbox
        %div.leftboxheader Vital Stats
        %div.leftboxfooter{style:"padding-top: 6px"}
          %ul
            %li Location: #{@user.location || "A galaxy far, far away..."}
            - unless @user.link.blank?
              %li Link: <a href='#{@user.link}' target='_newtab'>#{truncate(@user.link)}</a>
            - unless @user.education.blank? 
              %li Education: #{@user.education}
            - unless @user.company_name.blank?
              %li Company: #{@user.company_name}  
            - unless @user.title.blank?
              %li Title: #{@user.title} 
    %div.span11
      %div.newsfeed{ style: "min-height: 285px;" }
        %div.leftboxheader
          %div
            %span{ style: "border-bottom: 0px; padding-top:1px;" } Stream
            = link_to "Votes", user_path(@user, order: "votes"), class: "btn leftbtn"
            = link_to "Date", user_path(@user, order: "date"), class: "btn midbtn"
            %a.btn.rightbtn{ onclick: "$(this).parents('.leftboxheader').find('.questions_filter').slideDown();" } Question
          %div.questions_filter{ style: "display:none; text-transform: none;" }
            - if @creative_tasks.empty?
              %p There are no responses to be viewed yet.
            - else
              %p{ style: "font-size: 13px; margin: 10px 5px; color: black;" } Click on one of the questions below to see the response for that question only.
              %ol
                - @creative_tasks.each do |task|
                  %li{ style: "padding: 5px;" }= link_to truncate(task.question, length: 80), user_path(@user, task: task.id), style: "font-size: 14px; text-decoration: none; color: #0064CD"
        = render "shared/newsfeed", { newsfeed_items: @newsfeed_items }