<div class="alert-message success hide registration-message">Registration complete!</div>
<script>
$(function(){
  $('#change_credentials_form').submit(function(){
    var reg = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    if (!reg.test($("#user_email").val())){
      $(".form_errors").text("Email must be valid to complete signup.");
      return false;
    } if ($("#user_password").val().length < 6){
      $(".form_errors").text("Password must be at least 6 characters.");
      return false;
    } if ($("#user_password").val() != $("#user_password_confirmation").val()){
      $(".form_errors").text("Passwords must match.");
      return false;
    } else {
      $(".registration-message").show();
      $('#jumpstart_registration_modal').modal('hide');
    }
  });
});
</script>
<div id="jumpstart_registration_modal" class="modal hide fade">
  <%= form_for(user, :html => {:id => "change_credentials_form", :style => "margin-bottom:0px;"}) do |f| %>
  <%= f.hidden_field :path_id, :value => @path.id %>
  <div class="modal-header">
    <a href="#" class="close"></a>
    <h3>Save your new highscore!</span></h3>
  </div>
  <div class="modal-body">
    <p style="font-size: 16px; padding:0 7px 5px 10px; line-height: 22px;">Save your score by creating a new account, then you can access other <%= name_for_paths.pluralize %> and work your way up the leaderboard!</p>
    <p class="form_errors" style="padding:0 7px 5px 10px; color:red; margin-bottom: 15px;"></p>
    <div style="padding-left:20px;">
      <div class="clearfix" style="margin-bottom:12px;">
        <label style="font-size: 16px;">Email</label>
        <div class="input">
          <%= f.text_field :email, :value => "", :style => "width:175px; margin-right: 15px;" %>
        </div>
      </div>
      <div class="clearfix" style="margin-bottom:12px;">
        <label style="font-size: 16px;">Password</label>
        <div class="input">
          <%= f.password_field :password, :value => "", :style => "width:175px; margin-right: 15px;" %>
        </div>
      </div>
      <div class="clearfix" style="margin-bottom:12px;">
        <label style="font-size: 16px;">Confirm Password</label>
        <div class="input">
          <%= f.password_field :password_confirmation, :value => "", :style => "width:175px; margin-right: 15px;" %>
        </div>
      </div>
    </div>
    <hr/>
    <div style="margin:20px 0 20px 150px;">
      <%= link_to image_tag("/images/facebook_login_button.png", :size => "220x55"), "/auth/facebook", :id => "facebook_signin" %>
      <%= link_to image_tag("/images/google_login_button.png", :size => "220x45"), "/auth/google_oauth2", :id => "google_signin" %>
    </div>
    <div style="float:left; padding:0 0 10px 10px;">
      <a id="auth_signin_explanation_link" onclick="$('#auth_signin_explanation').slideDown();">Why use Google or Facebook login?</a>
      <div id="auth_signin_explanation" style="display:none; margin-top: 10px;">
        <p>When you use a third party login service like Google or Facebook, we can keep the bare minimum information we need to create an account for you. We don't need to store any passwords or other identifiable information.</p>
        <p>That way if your Metabright account is ever compromised, there's no stored password that hackers can take to access other services that you use.</p>
        <p style="font-weight:bold;">Long story short, its a lot more secure.</p>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <%= f.submit "Save Score", :class => "btn primary" %>
    <span class="btn seconday" onclick="$('#jumpstart_registration_modal').modal('hide');">Back</span>
  </div>
  <% end %>
</div>