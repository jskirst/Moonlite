<script>
$(function(){
	$('.locked_challenge').removeAttr("href");
	$('.locked_challenge').click(function(){
		$('#locked_modal').modal({
			 keyboard: true,
			 backdrop: 'static',
			 show: true
		});
	});
});
</script>

<div id="locked_modal" class="modal hide fade">
  <div class="modal-header">
    <a href="#" class="close"></a>
    <h3>Locked Challenges</span></h3>
  </div>
  <div class="modal-body">
    <p style="font-size: 16px; padding:0 7px 5px 10px;">You must complete at least 8 challenges to unlock this challenge.</p>
	</div>
	<div class="modal-footer">
		<%= link_to "Okay", "#", :class => "btn primary", :onclick => "$('#locked_modal').modal('hide');" %>
	</div>
</div>

<section>
	<div class="input" style="float:right; margin-top: 5px">
	<%= form_tag explore_path, :method => "get" do %>
		<%= text_field_tag :search, params[:search], :class => "xlarge", :value => "Search by title or keyword", :onclick => "this.value='';" %>
		<%= submit_tag "Search", :class => "btn primary" %>
	<% end %>
	</div>
	<div><a><h1><%= company_logo %> Challenges</h1></a></div>
</section>
<hr/>
<section id="path_explore">
<% if @path_categories.empty? %>
	<p style="padding:30px 20px 300px 20px;">No challenges have been listed for your organization yet. Please check with your administrator to see if your Moonlite instance has been properly configured.</p>
<% else %>
	<% @path_categories.each do |c| %>
		
		<% category = c[0] %>
		<% paths = c[1] %>
		<% next if paths.empty? %>
    
		<div class="row" style="padding-left: 20px;">
      <h2><%= category.name %></h2>
      <% unless @display_all %>
        <%= link_to "View All", explore_path(:c => category.id), :style=> "float: right; padding-top: 10px;" %>
      <% end %>
    </div>
    
		<%= render "path_grid", {:paths => paths, :display_all => @display_all} %>
		
	<% end %>
<% end %>
</section>