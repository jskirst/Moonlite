<script src="/javascripts/questions.js"></script>
<script>
var std_url = "<%= generate_section_url  %>";

$(function(){
  try {
    var paragraphs = [<%= @quoted_paragraphs.join(",").html_safe %>];
    var limit = <%= (@limit.nil? ? 1000 : @limit) %>;
    
    get_questions(paragraphs, 0, limit);
  } catch(err) {
    console.log("FUCK");
    console.log(err);
    
    finished(true);
  }
});
</script>
<style>
#questions_header p {}
#questions p {}
.question_set { padding: 20px 20px 0px 20px; }
.question_set blockquote { line-height: 22px; }
.question_set li { padding: 2px; line-height: 22px; }
.question_set li:hover { background-color:whitesmoke; }
.question_set li input { width:550px; line-height:22px; margin-right:10px; }
.question_set li input,span { margin-right:10px; }
.question_set .delete, .question_set .edit { float:right; margin-right:6px; margin-top:4px; }
#loading_status { padding: 30px; }
</style>
<section>
  <section id="questions_header">
    <h1>Generating Questions</h1>
    <p>Moonlite is using the instructions for this section to attempt to generate some test questions. This will take a few minutes, but we will immediately display questions as they are created. The source text for each of the questions will be displayed above them for reference.</p>
    <p>As you review the automatically generated questions, you can eliminate ones that don't make sense by double-clicking them. The questions don't have to be perfect - you can edit, reorder and change their answers later before you publish the section. Click Save to keep the ones you like.</p>
  </section>
  <section id="questions">
  </section>
  <div id="loading_status">
    <%= image_tag "loading.gif", :size => "64x64", :style => "margin-left: auto;margin-right: auto;padding: 25px 0 25px 0px;" %>
  </div>
</section>
<%= form_tag({:controller => :sections, :action => :review}, :method => :post) %>
<div id="hidden_inputs"></div>
<div class="actions">
  <%= submit_tag "Next", :class => "btn primary" %>
  <%= link_to "Pause", "#", :class => "btn secondary", :id => "pause_button" %>
  <%= link_to "Back", edit_section_path(@section, :m=>"tasks"), :class => "btn secondary" %>
</div>